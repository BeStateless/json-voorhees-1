<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>JSON Voorhees: Serialization Builder DSL</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">JSON Voorhees
   </div>
   <div id="projectbrief">Killer JSON for C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('serialization_builder_dsl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Serialization Builder DSL </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Most applications tend to have a lot of structure types.</p>
<p>While it is possible to write an <code>extractor</code> and <code>serializer</code> (or <code>adapter</code>) for each type, this can get a little bit tedious. Beyond that, it is very difficult to look at the contents of adapter code and discover what the JSON might actually look like. The builder DSL is meant to solve these issues by providing a convenient way to describe conversion operations for your C++ types.</p>
<p>At the end of the day, the goal is to take some C++ structures like this:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>person</div>
<div class="line">{</div>
<div class="line">    std::string first_name;</div>
<div class="line">    std::string last_name;</div>
<div class="line">    <span class="keywordtype">int</span>         age;</div>
<div class="line">    std::string role;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span>company</div>
<div class="line">{</div>
<div class="line">    std::string         name;</div>
<div class="line">    <span class="keywordtype">bool</span>                certified;</div>
<div class="line">    std::vector&lt;person&gt; employees;</div>
<div class="line">    std::list&lt;person&gt;   candidates;</div>
<div class="line">};</div>
</div><!-- fragment --><p>...and easily convert it to an from a JSON representation that looks like this:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;Paul&#39;s Construction&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;certified&quot;</span>: <span class="keyword">false</span>,</div>
<div class="line">    <span class="stringliteral">&quot;employees&quot;</span>: [</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;first_name&quot;</span>: <span class="stringliteral">&quot;Bob&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;last_name&quot;</span>:  <span class="stringliteral">&quot;Builder&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;age&quot;</span>:        29</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;first_name&quot;</span>: <span class="stringliteral">&quot;James&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;last_name&quot;</span>:  <span class="stringliteral">&quot;Johnson&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;age&quot;</span>:        38,</div>
<div class="line">            <span class="stringliteral">&quot;role&quot;</span>:       <span class="stringliteral">&quot;Foreman&quot;</span></div>
<div class="line">        }</div>
<div class="line">    ],</div>
<div class="line">    <span class="stringliteral">&quot;candidates&quot;</span>: [</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;firstname&quot;</span>: <span class="stringliteral">&quot;Adam&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;lastname&quot;</span>:  <span class="stringliteral">&quot;Ant&quot;</span></div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>To define a <code>formats</code> for this <code>person</code> type using the serialization builder DSL, you would say:</p>
<div class="fragment"><div class="line"><a class="code" href="classjsonv_1_1formats.html">jsonv::formats</a> fmts =</div>
<div class="line">    <a class="code" href="classjsonv_1_1formats__builder.html">jsonv::formats_builder</a>()</div>
<div class="line">        .type&lt;person&gt;()</div>
<div class="line">            .member(<span class="stringliteral">&quot;first_name&quot;</span>, &amp;person::first_name)</div>
<div class="line">                .alternate_name(<span class="stringliteral">&quot;firstname&quot;</span>)</div>
<div class="line">            .member(<span class="stringliteral">&quot;last_name&quot;</span>,  &amp;person::last_name)</div>
<div class="line">                .alternate_name(<span class="stringliteral">&quot;lastname&quot;</span>)</div>
<div class="line">            .member(<span class="stringliteral">&quot;age&quot;</span>,        &amp;person::age)</div>
<div class="line">                .until({ 6,1 })</div>
<div class="line">                .default_value(21)</div>
<div class="line">                .default_on_null()</div>
<div class="line">                .check_input([] (<span class="keywordtype">int</span> value) { <span class="keywordflow">if</span> (value &lt; 0) <span class="keywordflow">throw</span> std::logic_error(<span class="stringliteral">&quot;Age must be positive.&quot;</span>); })</div>
<div class="line">            .member(<span class="stringliteral">&quot;role&quot;</span>,       &amp;person::role)</div>
<div class="line">                .since({ 2,0 })</div>
<div class="line">                .default_value(<span class="stringliteral">&quot;Builder&quot;</span>)</div>
<div class="line">        .type&lt;company&gt;()</div>
<div class="line">            .member(<span class="stringliteral">&quot;name&quot;</span>,       &amp;company::name)</div>
<div class="line">            .member(<span class="stringliteral">&quot;certified&quot;</span>,  &amp;company::certified)</div>
<div class="line">            .member(<span class="stringliteral">&quot;employees&quot;</span>,  &amp;company::employees)</div>
<div class="line">            .member(<span class="stringliteral">&quot;candidates&quot;</span>, &amp;company::candidates)</div>
<div class="line">        .register_sequence_containers&lt;company, std::vector, std::list&gt;()</div>
<div class="line">    ;</div>
</div><!-- fragment --><h1><a class="anchor" id="Reference"></a>
Reference</h1>
<p>The DSL is made up of three major parts:</p>
<ol type="1">
<li><em>formats</em> &ndash; modifies a <code><a class="el" href="classjsonv_1_1formats.html" title="Simply put, this class is a collection of extractor and serializer instances. ">jsonv::formats</a></code> object by adding new type adapters to it</li>
<li><em>type</em> &ndash; modifies the behavior of a <code><a class="el" href="classjsonv_1_1adapter.html" title="An adapter is both an extractor and a serializer. ">jsonv::adapter</a></code> by adding new members to it</li>
<li><em>member</em> &ndash; modifies an individual member inside of a specific type</li>
</ol>
<p>Each successive function call transforms your context. <em>Narrowing</em> calls make your context more specific; for example, calling <code>type</code> from a <em>formats</em> context allows you to modify a specific type. <em>Widening</em> calls make the context less specific and are always available; for example, when in the <em>member</em> context, you can still call <code>type</code> from the <em>formats</em> context to specify a new type.</p>
<div align="center">
<iframe scrolling="no" frameborder="0" src="dot_inline_dotgraph_1.svg" width="171" height="259"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<h2><a class="anchor" id="serialization_builder_dsl_ref_formats"></a>
Formats Context</h2>
<p>Commands in this section modify the behavior of the underlying <code><a class="el" href="classjsonv_1_1formats.html" title="Simply put, this class is a collection of extractor and serializer instances. ">jsonv::formats</a></code> object.</p>
<h3><a class="anchor" id="serialization_builder_dsl_ref_formats_level"></a>
Level</h3>
<h4><a class="anchor" id="serialization_builder_dsl_ref_formats_level_check_references"></a>
check_references</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_formats_level_reference_type"></a>
reference_type</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_formats_level_register_adapter"></a>
register_adapter</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_formats_level_register_sequence_container"></a>
register_sequence_container&lt;TContainer&gt;</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_formats_level_register_sequence_containers"></a>
register_sequence_containers&lt;T, template... &lt;T, ...&gt;&gt;</h4>
<p>TODO</p>
<h3><a class="anchor" id="serialization_builder_dsl_ref_formats_narrowing"></a>
Narrowing</h3>
<h4><a class="anchor" id="serialization_builder_dsl_ref_formats_narrowing_type"></a>
type&lt;T&gt;</h4>
<p>TODO</p>
<h2><a class="anchor" id="serialization_builder_dsl_ref_type"></a>
Type Context</h2>
<p>Commands in this section modify the behavior of the <code><a class="el" href="classjsonv_1_1adapter.html" title="An adapter is both an extractor and a serializer. ">jsonv::adapter</a></code> for a particular type.</p>
<h3><a class="anchor" id="serialization_builder_dsl_ref_type_level"></a>
Level</h3>
<h3><a class="anchor" id="serialization_builder_dsl_ref_type_narrowing"></a>
Narrowing</h3>
<h4><a class="anchor" id="serialization_builder_dsl_ref_type_narrowing_member"></a>
member</h4>
<p>TODO</p>
<h2><a class="anchor" id="serialization_builder_dsl_ref_member"></a>
Member Context</h2>
<h3><a class="anchor" id="serialization_builder_dsl_ref_member_level"></a>
Level</h3>
<h4><a class="anchor" id="serialization_builder_dsl_ref_member_level_after"></a>
after</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_member_level_alternate_name"></a>
alternate_name</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_member_level_before"></a>
before</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_member_level_default_value"></a>
default_value</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_member_level_default_on_null"></a>
default_on_null</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_member_level_encode_if"></a>
encode_if</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_member_level_since"></a>
since</h4>
<p>TODO</p>
<h4><a class="anchor" id="serialization_builder_dsl_ref_member_level_until"></a>
until</h4>
<p>TODO </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
